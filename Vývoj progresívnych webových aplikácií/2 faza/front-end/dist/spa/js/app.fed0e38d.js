(()=>{"use strict";var e={2812:(e,t,n)=>{n(5363),n(71);var o=n(8880),s=n(9592),r=n(3673);function i(e,t,n,o,s,i){const a=(0,r.up)("router-view");return(0,r.wg)(),(0,r.j4)(a)}const a=(0,r.aZ)({name:"App"});var c=n(4260);const l=(0,c.Z)(a,[["render",i]]),u=l;var h=n(7790),d=n(7083),p=n(9582);const m=[{path:"/",redirect:()=>({name:"home"})},{path:"/auth",component:()=>Promise.all([n.e(736),n.e(789)]).then(n.bind(n,6789)),children:[{path:"register",name:"register",meta:{guestOnly:!0},component:()=>Promise.all([n.e(736),n.e(40)]).then(n.bind(n,4040))},{path:"login",name:"login",meta:{guestOnly:!0},component:()=>Promise.all([n.e(736),n.e(564)]).then(n.bind(n,2564))}]},{path:"/channels",meta:{requiresAuth:!0},component:()=>Promise.all([n.e(736),n.e(924)]).then(n.bind(n,3924)),children:[{path:"",name:"home",component:()=>Promise.all([n.e(736),n.e(517)]).then(n.bind(n,3517))}]},{path:"/:catchAll(.*)*",component:()=>Promise.all([n.e(736),n.e(898)]).then(n.bind(n,8898))}],f=m,g=(0,d.BC)((function(){const e=p.PO,t=(0,p.p7)({scrollBehavior:()=>({left:0,top:0}),routes:f,history:e("/")});return t}));async function v(e,t){const o="function"===typeof h["default"]?await(0,h["default"])({}):h["default"],{storeKey:r}=await Promise.resolve().then(n.bind(n,7790)),i="function"===typeof g?await g({store:o}):g;o.$router=i;const a=e(u);return a.use(s.Z,t),{app:a,store:o,storeKey:r,router:i}}var y=n(5342),b=n(4434);const k={config:{},plugins:{Dialog:y.Z,Notify:b.Z}},w="/";async function T({app:e,router:t,store:n,storeKey:o},s){let r=!1;const i=e=>{try{return t.resolve(e).href}catch(n){}return Object(e)===e?null:e},a=e=>{if(r=!0,"string"===typeof e&&/^https?:\/\//.test(e))return void(window.location.href=e);const t=i(e);null!==t&&(window.location.href=t)},c=window.location.href.replace(window.location.origin,"");for(let u=0;!1===r&&u<s.length;u++)try{await s[u]({app:e,router:t,store:n,ssrContext:null,redirect:a,urlPath:c,publicPath:w})}catch(l){return l&&l.url?void a(l.url):void console.error("[Quasar] boot error:",l)}!0!==r&&(e.use(t),e.use(n,o),e.mount("#q-app"))}v(o.ri,k).then((e=>Promise.all([Promise.resolve().then(n.bind(n,1768)),Promise.resolve().then(n.bind(n,4220)),Promise.resolve().then(n.bind(n,6651))]).then((t=>{const n=t.map((e=>e.default)).filter((e=>"function"===typeof e));T(e,n)}))))},4220:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});var o=n(7083),s=n(5585),r=function(e,t,n,o){function s(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function i(e){try{c(o.next(e))}catch(t){r(t)}}function a(e){try{c(o["throw"](e))}catch(t){r(t)}}function c(e){e.done?n(e.value):s(e.value).then(i,a)}c((o=o.apply(e,t||[])).next())}))};const i=e=>({name:"login",query:{redirect:e.fullPath}}),a=(0,o.xr)((({router:e,store:t})=>{s.E5.onLogout((()=>{e.push(i(e.currentRoute.value))})),e.beforeEach((e=>r(void 0,void 0,void 0,(function*(){const n=yield t.dispatch("auth/check");return e.meta.requiresAuth&&!n?i(e):e.meta.guestOnly&&n?{name:"home"}:void 0}))))}))},1768:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l,api:()=>a});var o=n(7083),s=n(52),r=n.n(s),i=n(5585);const a=r().create({baseURL:"https://prod.api.com",withCredentials:!0,headers:{}}),c=!1;a.interceptors.request.use((e=>{const t=i.E5.getToken();return null!==t&&(e.headers.Authorization=`Bearer ${t}`),c&&console.info("-> ",e),e}),(e=>(c&&console.error("-> ",e),Promise.reject(e)))),a.interceptors.response.use((e=>(c&&console.info("<- ",e),e)),(e=>(c&&console.error("<- ",e.response),401!==e.response.status||e.response.config.dontTriggerLogout||i.E5.logout(),Promise.reject(e))));const l=(0,o.xr)((({app:e})=>{e.config.globalProperties.$axios=r(),e.config.globalProperties.$api=a}))},6651:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i,io:()=>r});var o=n(7083),s=n(6638);const r=s.C.createManager("https://prod.api.com"),i=(0,o.xr)((e=>{e.app.config.globalProperties.$io=r,s.C.boot(e)}))},6638:(e,t,n)=>{n.d(t,{C:()=>i});var o=n(3396),s=n(5585);const r=!1;class i{constructor(e){this.namespace=e,this.$socket=null,this.constructor.addInstance(this)}static getManager(){if(!this.manager)throw new Error('Socket.io Manager not created. Please call "SocketManager.createManager(uri)" in quasar boot file.');return this.manager}static createManager(e){const t=new o.dK(e,{autoConnect:!1});return this.manager=t,t}static addInstance(e){if(this.namespaces.has(e.namespace))throw new Error(`Duplicate socket manager created for namespace "${e.namespace}".`);this.namespaces.add(e.namespace),null!==this.params?this.bootInstance(e):this.instances.push(e)}static destroyInstance(e){this.instances=this.instances.filter((t=>t!==e)),this.namespaces.delete(e.namespace),e.socket.disconnect(),e.socket.removeAllListeners(),e.$socket=null}static bootInstance(e){e.subscribe(this.params),e.socket.connect()}static boot(e){if(this.params)throw new Error("SocketManager is already booted. Call it once from quasar boot file.");this.params=e,this.instances.forEach((e=>this.bootInstance(e))),this.instances=[]}get socket(){return this.$socket||(this.$socket=this.socketWithAuth()),this.$socket}socketWithAuth(){const e=this.constructor.getManager(),t=e.socket(this.namespace,{auth:{token:s.E5.getToken()}});return t.on("connect_error",(e=>{var n;if(r&&console.error(`${this.namespace} [connect_error]`,e.message,e.data),401===(null===(n=e.data)||void 0===n?void 0:n.status)){const e=s.E5.onChange((n=>{t.auth={token:n},e(),t.connect()}))}})),r&&(t.on("connect",(()=>{console.info(`${this.namespace} [connect]`)})),t.on("disconnect",(e=>{console.info(`${this.namespace} [disconnect]`,e)})),t.on("error",(e=>{console.error(`${this.namespace} [error]`,e.message)})),t.onAny(((e,...t)=>{console.info(`${this.namespace} [${e}]`,t)}))),t}emitAsync(e,...t){return new Promise(((n,o)=>{this.socket.emit(e,...t,(([e,t])=>{e?o(e):n(t)}))}))}destroy(){this.constructor.destroyInstance(this)}}i.instances=[],i.namespaces=new Set,i.params=null},5585:(e,t,n)=>{n.d(t,{E5:()=>r,ON:()=>l,Qs:()=>p});var o=n(6395);class s{constructor(e){this.storageKey=e,this.currentToken=this.getToken(),this.onChangeListeners=[],this.storageListener=e=>{e.key===this.storageKey&&this.notifyListeners()},window.addEventListener("storage",this.storageListener)}notifyListeners(){const e=this.getToken();this.currentToken!==e&&(this.onChangeListeners.forEach((t=>t(e,this.currentToken))),this.currentToken=e)}onChange(e){return this.onChangeListeners.push(e),null!==this.currentToken&&window.setTimeout((()=>e(this.currentToken,null)),0),()=>{const t=this.onChangeListeners.indexOf(e);t>=0&&this.onChangeListeners.splice(t,1)}}onLogout(e){return this.onChange((t=>{null===t&&e()}))}getToken(){return o.Z.getItem(this.storageKey)}removeToken(){o.Z.remove(this.storageKey),this.notifyListeners()}logout(){return this.removeToken()}setToken(e){o.Z.set(this.storageKey,e),this.notifyListeners()}}const r=new s("auth_token");var i=n(1768),a=function(e,t,n,o){function s(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function i(e){try{c(o.next(e))}catch(t){r(t)}}function a(e){try{c(o["throw"](e))}catch(t){r(t)}}function c(e){e.done?n(e.value):s(e.value).then(i,a)}c((o=o.apply(e,t||[])).next())}))};class c{me(e=!1){return a(this,void 0,void 0,(function*(){return i.api.get("auth/me",{dontTriggerLogout:e}).then((e=>e.data)).catch((e=>{var t;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)?null:Promise.reject(e)}))}))}register(e){return a(this,void 0,void 0,(function*(){const t=yield i.api.post("auth/register",e);return t.data}))}login(e){return a(this,void 0,void 0,(function*(){const t=yield i.api.post("auth/login",e);return t.data}))}logout(){return a(this,void 0,void 0,(function*(){yield i.api.post("auth/logout")}))}}const l=new c;var u=n(6638);class h extends u.C{subscribe({store:e}){const t=this.namespace.split("/").pop();this.socket.on("message",(n=>{e.commit("channels/NEW_MESSAGE",{channel:t,message:n})}))}addMessage(e){return console.log(e,"inside manager"),this.emitAsync("addMessage",e)}loadMessages(){return this.emitAsync("loadMessages")}}class d{constructor(){this.channels=new Map}join(e){if(this.channels.has(e))throw new Error(`User is already joined in channel "${e}"`);const t=new h(`/channels/${e}`);return this.channels.set(e,t),t}leave(e){const t=this.channels.get(e);return!!t&&(t.destroy(),this.channels.delete(e))}in(e){return console.log(this.channels,e),this.channels.get(e)}}const p=new d;class m extends u.C{subscribe(){this.socket.on("user:list",(e=>{console.log("Online users list",e)})),this.socket.on("user:online",(e=>{console.log("User is online",e)})),this.socket.on("user:offline",(e=>{console.log("User is offline",e)})),r.onChange((e=>{e?this.socket.connect():this.socket.disconnect()}))}}new m("/")},7790:(e,t,n)=>{n.r(t),n.d(t,{default:()=>D,storeKey:()=>H,useStore:()=>I});var o=n(7083),s=n(3617);function r(){return{user:null,status:"pending",errors:[]}}const i=r;var a=n(5585),c=function(e,t,n,o){function s(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function i(e){try{c(o.next(e))}catch(t){r(t)}}function a(e){try{c(o["throw"](e))}catch(t){r(t)}}function c(e){e.done?n(e.value):s(e.value).then(i,a)}c((o=o.apply(e,t||[])).next())}))};const l={check({state:e,commit:t,dispatch:n}){var o;return c(this,void 0,void 0,(function*(){try{t("AUTH_START");const s=yield a.ON.me();return(null===s||void 0===s?void 0:s.id)!==(null===(o=e.user)||void 0===o?void 0:o.id)&&(yield n("channels/join","general",{root:!0})),t("AUTH_SUCCESS",s),null!==s}catch(s){throw t("AUTH_ERROR",s),s}}))},register({commit:e},t){return c(this,void 0,void 0,(function*(){try{e("AUTH_START");const n=yield a.ON.register(t);return e("AUTH_SUCCESS",null),n}catch(n){throw e("AUTH_ERROR",n),n}}))},login({commit:e},t){return c(this,void 0,void 0,(function*(){try{e("AUTH_START");const n=yield a.ON.login(t);return e("AUTH_SUCCESS",null),a.E5.setToken(n.token),n}catch(n){throw e("AUTH_ERROR",n),n}}))},logout({commit:e,dispatch:t}){return c(this,void 0,void 0,(function*(){try{e("AUTH_START"),yield a.ON.logout(),yield t("channels/leave",null,{root:!0}),e("AUTH_SUCCESS",null),a.E5.removeToken()}catch(n){throw e("AUTH_ERROR",n),n}}))}},u=l,h={isAuthenticated(e){return null!==e.user}},d=h,p={AUTH_START(e){e.status="pending",e.errors=[]},AUTH_SUCCESS(e,t){e.status="success",e.user=t},AUTH_ERROR(e,t){e.status="error",e.errors=t}},m=p,f={namespaced:!0,actions:u,getters:d,mutations:m,state:i},g=f;function v(){return{loading:!1,error:null,messages:{},active:null}}const y=v;var b=function(e,t,n,o){function s(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function i(e){try{c(o.next(e))}catch(t){r(t)}}function a(e){try{c(o["throw"](e))}catch(t){r(t)}}function c(e){e.done?n(e.value):s(e.value).then(i,a)}c((o=o.apply(e,t||[])).next())}))};const k={join({commit:e},t){return b(this,void 0,void 0,(function*(){try{e("LOADING_START");const n=yield a.Qs.join(t).loadMessages();e("LOADING_SUCCESS",{channel:t,messages:n})}catch(n){throw e("LOADING_ERROR",n),n}}))},leave({getters:e,commit:t},n){return b(this,void 0,void 0,(function*(){const o=null!==n?[n]:e.joinedChannels;o.forEach((e=>{a.Qs.leave(e),t("CLEAR_CHANNEL",e)}))}))},addMessage({commit:e},{channel:t,message:n}){var o;return b(this,void 0,void 0,(function*(){console.log("picus vyjebany kkt",t);const s=yield null===(o=a.Qs["in"](t))||void 0===o?void 0:o.addMessage(n);console.log(s),e("NEW_MESSAGE",{channel:t,message:s})}))}},w=k,T={joinedChannels(e){return Object.keys(e.messages)},currentMessages(e){return null!==e.active?e.messages[e.active]:[]},lastMessageOf(e){return t=>{const n=e.messages[t];return n.length>0?n[n.length-1]:null}}},A=T,C={LOADING_START(e){e.loading=!0,e.error=null},LOADING_SUCCESS(e,{channel:t,messages:n}){e.loading=!1,e.messages[t]=n},LOADING_ERROR(e,t){e.loading=!1,e.error=t},CLEAR_CHANNEL(e,t){e.active=null,delete e.messages[t]},SET_ACTIVE(e,t){e.active=t},NEW_MESSAGE(e,{channel:t,message:n}){e.messages[t].push(n)}},E=C,S={namespaced:!0,actions:w,getters:A,mutations:E,state:y},O=S;function P(){return{channels:[{id:1,name:"Channel 1",isPrivate:!1,isTopped:!0},{id:2,name:"Channel 2",isPrivate:!0,isTopped:!1},{id:3,name:"Channel 3",isPrivate:!1,isTopped:!1},{id:4,name:"Channel 4",isPrivate:!1,isTopped:!1}],isOnline:!0,userName:"Roman Palenik",DNDValue:!0}}const _=P,R={someAction(){}},L=R,N={someGetter(){}},U=N,j={someMutation(){},updateChannels(e,t){e.channels.push(t)},updateIsOnline(e,t){e.isOnline=t},updateUserName(e,t){e.userName=t},updateDNDValue(e,t){e.DNDValue=t},sortChannels(e){e.channels.sort(((e,t)=>e.isTopped&&!t.isTopped?-1:!e.isTopped&&t.isTopped?1:0))}},M=j,x={namespaced:!0,actions:L,getters:U,mutations:M,state:_},$=x,H=Symbol("vuex-key"),D=(0,o.h)((function(){const e=(0,s.MT)({modules:{auth:g,userData:$,channels:O},strict:!1});return e}));function I(){return(0,s.oR)(H)}}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}n.m=e,(()=>{var e=[];n.O=(t,o,s,r)=>{if(!o){var i=1/0;for(u=0;u<e.length;u++){for(var[o,s,r]=e[u],a=!0,c=0;c<o.length;c++)(!1&r||i>=r)&&Object.keys(n.O).every((e=>n.O[e](o[c])))?o.splice(c--,1):(a=!1,r<i&&(i=r));if(a){e.splice(u--,1);var l=s();void 0!==l&&(t=l)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[o,s,r]}})(),(()=>{n.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return n.d(t,{a:t}),t}})(),(()=>{n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}})(),(()=>{n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,o)=>(n.f[o](e,t),t)),[]))})(),(()=>{n.u=e=>"js/"+e+"."+{40:"3e325c09",517:"28056716",564:"1c13a367",789:"ed5c8239",898:"565b0896",924:"732cd327"}[e]+".js"})(),(()=>{n.miniCssF=e=>"css/"+({143:"app",736:"vendor"}[e]||e)+"."+{143:"31d6cfe0",736:"75fb893c",924:"b3823c91"}[e]+".css"})(),(()=>{n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={},t="slack2.0:";n.l=(o,s,r,i)=>{if(e[o])e[o].push(s);else{var a,c;if(void 0!==r)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var h=l[u];if(h.getAttribute("src")==o||h.getAttribute("data-webpack")==t+r){a=h;break}}a||(c=!0,a=document.createElement("script"),a.charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+r),a.src=o),e[o]=[s];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(p);var s=e[o];if(delete e[o],a.parentNode&&a.parentNode.removeChild(a),s&&s.forEach((e=>e(n))),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),c&&document.head.appendChild(a)}}})(),(()=>{n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{n.p="/"})(),(()=>{var e=(e,t,n,o)=>{var s=document.createElement("link");s.rel="stylesheet",s.type="text/css";var r=r=>{if(s.onerror=s.onload=null,"load"===r.type)n();else{var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=i,c.request=a,s.parentNode.removeChild(s),o(c)}};return s.onerror=s.onload=r,s.href=t,document.head.appendChild(s),s},t=(e,t)=>{for(var n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var s=n[o],r=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(r===e||r===t))return s}var i=document.getElementsByTagName("style");for(o=0;o<i.length;o++){s=i[o],r=s.getAttribute("data-href");if(r===e||r===t)return s}},o=o=>new Promise(((s,r)=>{var i=n.miniCssF(o),a=n.p+i;if(t(i,a))return s();e(o,a,s,r)})),s={143:0};n.f.miniCss=(e,t)=>{var n={924:1};s[e]?t.push(s[e]):0!==s[e]&&n[e]&&t.push(s[e]=o(e).then((()=>{s[e]=0}),(t=>{throw delete s[e],t})))}})(),(()=>{var e={143:0};n.f.j=(t,o)=>{var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)o.push(s[2]);else{var r=new Promise(((n,o)=>s=e[t]=[n,o]));o.push(s[2]=r);var i=n.p+n.u(t),a=new Error,c=o=>{if(n.o(e,t)&&(s=e[t],0!==s&&(e[t]=void 0),s)){var r=o&&("load"===o.type?"missing":o.type),i=o&&o.target&&o.target.src;a.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",a.name="ChunkLoadError",a.type=r,a.request=i,s[1](a)}};n.l(i,c,"chunk-"+t,t)}},n.O.j=t=>0===e[t];var t=(t,o)=>{var s,r,[i,a,c]=o,l=0;if(i.some((t=>0!==e[t]))){for(s in a)n.o(a,s)&&(n.m[s]=a[s]);if(c)var u=c(n)}for(t&&t(o);l<i.length;l++)r=i[l],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(u)},o=self["webpackChunkslack2_0"]=self["webpackChunkslack2_0"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var o=n.O(void 0,[736],(()=>n(2812)));o=n.O(o)})();